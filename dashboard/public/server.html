<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-locale-key="dashboard_server_page_title">Gerenciar Servidor</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="main-container">
    <aside class="sidebar">
      <div class="sidebar-header"><h1 id="bot-name" data-locale-key="dashboard_loading"></h1></div>
      <nav class="sidebar-nav" id="server-nav-links"></nav>
    </aside>

    <main class="dashboard-grid">
      <div class="widget">
        <h2 id="server-name-title" data-locale-key="dashboard_loading_server"></h2>
      </div>

      <div id="panel-ai" class="settings-panel">
        <div id="panel-ai-container">
          <div class="widget">
            <h2 data-locale-key="dashboard_server_ai_settings"></h2>
            <div class="sub-widget">
              <h3 data-locale-key="dashboard_server_ai_channels"></h3>
              <div id="channels-list" class="channels-list"></div>
            </div>
            <div class="sub-widget">
              <h3 data-locale-key="dashboard_server_chatbot_settings"></h3>
              <form id="chatbot-settings-form" class="profile-form">

                <div class="form-group">
                  <label for="ai-context-limit" data-locale-key="dashboard_server_ai_context_limit_label">Limite de Contexto</label>
                  <input type="number" id="ai-context-limit" class="form-number" min="1" max="50" value="15">
                  <small style="color:var(--muted); font-size:0.8rem;" data-locale-key="dashboard_server_ai_context_limit_desc">Nº de mensagens que o bot lembra. (1-50)</small>
                </div>

                <div class="form-group">
                  <label for="ai-personality" data-locale-key="dashboard_server_ai_personality_label"></label>
                  <textarea id="ai-personality" class="form-textarea" data-locale-placeholder-key="dashboard_server_ai_personality_placeholder"></textarea>
                </div>
                <div class="form-group">
                  <label for="ai-examples" data-locale-key="dashboard_server_ai_examples_label"></label>
                  <textarea id="ai-examples" class="form-textarea" data-locale-placeholder-key="dashboard_server_ai_examples_placeholder"></textarea>
                </div>
                <div class="sub-widget">
                  <h3 data-locale-key="dashboard_server_ai_tool_permissions">Permissões de Ferramentas da IA</h3>
                  <div id="ai-tools-list" class="tools-list" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <!-- Checkboxes serão inseridos aqui pelo server.js -->
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="widget">
            <div class="chat-tester">
              <div class="chat-tester-header">
                <h2 data-locale-key="dashboard_server_ai_tester_title"></h2>
                <button id="clear-chat-btn" data-locale-key="dashboard_server_ai_tester_clear_button"></button>
              </div>
              <div id="chat-display" class="chat-tester-display"></div>
              <div class="chat-tester-input">
                <input type="text" id="chat-input" class="form-input" data-locale-placeholder-key="dashboard_server_ai_tester_input_placeholder">
                <button id="send-chat-btn" class="form-button" data-locale-key="dashboard_server_ai_tester_send_button"></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="panel-music" class="widget settings-panel" style="display: none;">
        <h2 data-locale-key="dashboard_server_music_title">Música</h2>
        <div id="music-container" style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
            <div id="music-player-widget">
                <div class="sub-widget" id="now-playing-card">
                    <h3 data-locale-key="dashboard_server_music_now_playing">Tocando Agora</h3>
                    <p id="np-song-title">Nada no momento</p>
                    <div id="np-controls" style="display: flex; gap: 10px; margin-top: 10px;">
                        <button id="music-pause-btn" class="form-button">⏸</button>
                        <button id="music-resume-btn" class="form-button">▶️</button>
                        <button id="music-skip-btn" class="form-button">⏭️</button>
                    </div>
                </div>
                 <div class="sub-widget" id="music-settings-card" style="margin-top: 20px;">
                    <h3 data-locale-key="dashboard_server_music_settings">Configurações</h3>
                    <div class="form-group">
                        <label for="music-dj-role" data-locale-key="dashboard_server_music_dj_role">Cargo de DJ</label>
                        <input type="text" id="music-dj-role" class="form-input" placeholder="Digite o nome do cargo">
                    </div>
                </div>
            </div>
            <div class="sub-widget" id="music-queue-widget">
                <h3 data-locale-key="dashboard_server_music_queue">Fila de Reprodução</h3>
                <div id="queue-list" style="max-height: 400px; overflow-y: auto;">
                    <p>A fila está vazia.</p>
                </div>
            </div>
        </div>
      </div>

      <div id="panel-faq" class="widget settings-panel" style="display: none;">
        <h2 data-locale-key="dashboard_server_faq_settings"></h2>
        <div id="faq-list" class="faq-list"></div>
        <div class="profile-form">
          <input type="text" id="faq-new-question" class="form-input" data-locale-placeholder-key="dashboard_server_faq_new_question_placeholder">
          <textarea id="faq-new-answer" class="form-textarea" data-locale-placeholder-key="dashboard_server_faq_new_answer_placeholder"></textarea>
          <button id="faq-add-btn" class="form-button" data-locale-key="dashboard_server_faq_add_button"></button>
        </div>
      </div>

      <div id="panel-github" class="widget settings-panel" style="display: none;">
        <h2 data-locale-key="dashboard_server_github_title">GitHub Monitoring</h2>
        <p data-locale-key="dashboard_server_github_desc" style="margin-bottom: 1rem;">Set up detailed notifications for commits, pull requests, issues, and releases from your GitHub repositories.</p>
        <a href="#" id="go-to-github-btn" class="form-button" style="text-decoration: none; text-align: center; padding: 12px;" data-locale-key="dashboard_server_github_button">Configure GitHub Monitoring</a>
      </div>

      <div class="widget">
        <button id="save-settings-btn" class="form-button" data-locale-key="dashboard_server_save_button"></button>
        <p id="save-status" class="status-message"></p>
      </div>
    </main>
  </div>
  <script src="auth.js"></script>
  <script src="translator.js"></script>
  <script src="server.js"></script>
</body>
</html>
